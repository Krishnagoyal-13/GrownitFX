<Files ".env">
  Require all denied
</Files>

<IfModule mod_rewrite.c>
RewriteEngine On

# Support direct clean URLs like /portal/register even when directory
# handling differs across servers.
RewriteRule ^(login|register|dashboard)$ public/index.php?route=/$1 [QSA,L]
RewriteRule ^logout$ public/index.php?route=/logout [QSA,L]

# If request is a real file/dir in /portal, serve it (e.g. /portal/public/...)
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Route all /portal/* requests to the front controller in /portal/public.
RewriteRule ^ public/index.php [QSA,L]
</IfModule>
